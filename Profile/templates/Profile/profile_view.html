{% extends 'base_home.html' %}

{% block title %}My {{block.super}} Profile View{% endblock title %}


{% block content %}
<div class="card-header">Edit Your Profile</div>
  <div class="card-group">
    <div class="card">
      <div class="card-body">
        {% for d in info %}
          <h5 class="card-title">Basic Information <a href="{% url 'Profile:ProfileEdit' d.id %}?next={{ request.path|urlencode }}" class="badge badge-primary">Edit</a></h5>
          <p class="card-text">Name: {{ request.user.first_name }} {{ request.user.last_name }}</p>
          <p class="card-text">Display name: {{ d.synonym }}</p>
          <p class="card-text">Date of Birth: {{ d.birth_date }}</p>
          <p class="card-text">Profile email: {{ request.user.email }}</p>
          <p class="card-text">Standard Rate (per hour): {{ d.std_rate }}</p>
          <p class="card-text">Currency: {{ d.currency }}</p>
          <p class="card-text">Do you wish to be a mentor to others? {{ d.get_mentor_display }}</p>
        <div class="card-footer bg-transparent border-success"></div>
          <h5 class="card-title">Online Profiles <a href="{% url 'Profile:OnlineProfileAdd' request.user.id %}" class="badge badge-primary">Add</a></h5>
          <table class="table-sm" id="online">
            <thead>
              <tr>
                <th width="30%">Site</th>
                <th>Address</th>
              </tr>
            </thead>
            {% for s in online %}
            <tbody>
              <tr>
                <td>{{ s.sitename }}</td>
                <td><a href="{{ s.profileurl }}">{{ s.profileurl }}</a></td>
                <td>
                  <form  action="{% url 'Profile:OnlineDelete' s.id %}" method="post">
                    {% csrf_token %}
                    <button type="submit" class="badge badge-danger badge-pill">Remove</button>
                  </form>
                </td>
              </tr>
              {% empty %}
                <p>No Profiles listed.</p>
              {% endfor %}
            </tbody>
          </table>

          <div class="card-footer bg-transparent border-success"></div>
          <h5 class="card-title">Languages <a href="{% url 'Profile:LanguageAdd' request.user.id %}" class="badge badge-primary">Add</a></h5>
          <table class="table-sm">
            <col width="25%">
            <col width="20%">
            <col width="40%">
            <thead>
              <tr>
                <th>Language</th>
                <th>Level</th>
                <th></th>
              </tr>
            </thead>
            {% for l in speak %}
            <tbody>
              <tr>
                <td>{{ l.language }}</td>
                <td>{{ l.get_level_display }}</td>
                <td><a href="{% url 'Profile:LanguageEdit' profile_id=request.user.id lang_id=l.id %}" class="badge badge-primary badge-pill">Edit</a></td>
              </tr>
              {% empty %}
                <p>No Languages listed.</p>
              {% endfor %}
            </tbody>
          </table>

      </div>
    </div>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title" id="email">Email addresses <a href="{% url 'Profile:EmailEdit' d.id %}?next={{ request.path|urlencode }}" class="badge badge-primary">Add</a></h5>
      <h6>Past (No longer active)</h6>
      {% for e in email %}
      {% if e.active is False %}
      <ul class="list-group list-group-flush">
        <li class="list-group-item d-flex justify-content-between align-items-center">
          {{ e.email }}
          <span>
            <a href="{% url 'Profile:EmailStatus' profile_id=request.user.id email_id=e.id %}" class="badge badge-primary badge-pill">Change Status</a>
            <form  action="{% url 'Profile:EmailDelete' e.id %}" method="post">
              {% csrf_token %}
              <button type="submit" class="badge badge-danger badge-pill">Remove</button>
            </form>
          </span>
        </li>
      </ul>
      {% endif %}
      {% endfor %}
      <h6>Current (Monitored)</h6>
      {% for e in email %}
      {% if e.active is True %}
      <ul class="list-group list-group-flush">
        <li class="list-group-item d-flex justify-content-between align-items-center">
          {{ e.email }}
          <span>
            <a href="{% url 'Profile:EmailStatus' profile_id=request.user.id email_id=e.id %}" class="badge badge-primary badge-pill">Change Status</a>
            <form  action="{% url 'Profile:EmailDelete' e.id %}" method="post">
              {% csrf_token %}
              <button type="submit" class="badge badge-danger badge-pill">Remove</button>
            </form>
          </span>
        </li>
      </ul>
      {% endif %}
      {% endfor %}
    </div>
  </div>
</div>
<div class="card-group">
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Background</h5>
      <p class="card-text text-justify">
        {{ d.background|linebreaks }}</p>
    </div>
  </div>
</div>
{% endfor %}
<div class="card-group">
  <div class="card">
    <div class="card-body" id="History">
      <h5 class="card-title">Career History <a href="{% url 'Profile:History' %}" class="badge badge-primary">Add</a></h5>
      <p class="card-text">
        {% if history %}
        <table class="table table-sm">
          <thead>
            <tr>
              <th>From</th>
              <th>To</th>
              <th>Employer</th>
              <th>Work Configeration</th>
            </tr>
          </thead>
          <tbody>
            {% for h in history %}
            <tr>
              <td>{{ h.date_from }}</td>
              {% if h.date_to %}
                <td>{{ h.date_to }}</td>
              {% else %}
                <td>Currently Works Here</td>
              {% endif %}
              <td>{{ h.companybranch }}</td>
              <td>{{ h.work_configeration }}</td>
              <td><a href="{% url 'Profile:Resigned' h.id %}" class="badge badge-primary">I Resigned</a></td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
        {% endif %}
    </div>
  </div>
</div>
<div class="card-group">
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Uploaded Files <a href="{% url 'Profile:FileUploadView' request.user.id %}" class="badge badge-primary">Add File</a></h5>
      <table class="table-sm">
        <thead>
        </thead>
        {% for f in upload %}
        <tbody>
          <tr>
            <td><a href="{{ f.file.url }}" target="_blank">{{ f.title }}</a></td>
            <td>
              <form  action="{% url 'Profile:FileDelete' f.id %}" method="post">
                {% csrf_token %}
                <button type="submit" class="badge badge-danger badge-pill">Delete</button>
              </form>
            </td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
<div class="card-header">Identification</div>
<div class="card-group">
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Identification Document <a href="{% url 'Profile:IdView' request.user.id %}" class="badge badge-primary">Edit</a></h5>
      <table class="table-sm">
        <thead>
          <tr>
            <th>ID Number</th>
            <th>ID Type</th>
          </tr>
        </thead>
        <tbody>
          {% for i in id %}
          <tr>
            <td>{{ i.identification }}</td>
            <td>{{ i.id_type }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Passport Information <a href="{% url 'Profile:PassportAddView' request.user.id %}" class="badge badge-primary">Add</a></h5>
        <table class="table-sm" id="passport">
        <thead>
          <tr>
            <th>Passport Number</th>
            <th>Issuing Country</th>
            <th>Expiry Date</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for p in passport  %}
          <tr>
            <td>{{ p.passport_number }}</td>
            <td>{{ p.get_issue_display }}</td>
            <td>{{ p.expiry_date }}</td>
            <td><a href="{% url 'Profile:PassportEditView' p_id=p.id profile_id=request.user.id %}" class="badge badge-primary badge-pill">Edit</a></td>
            <td>
              <form  action="{% url 'Profile:PassportDelete' p.id %}" method="post">
                {% csrf_token %}
                <button type="submit" class="badge badge-danger badge-pill">Remove</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      </div>
    </div>
  </div>

<div class="card-header">Contact Information</div>

<div class="card-group">
  <div class="card">
    <div class="card-body">

      <h5 class="card-title">Physical Address <a href="{% url 'Profile:PhysicalAddress' physical.talent.id %}" class="badge badge-primary">Edit</a></h5>
      <table class="table-small">
        <thead>
        </thead>
        <tbody>
          <tr>
            <th>Line 1</th>
            <td>{{ physical.line1 }}</td>
          </tr>
          <tr>
            <th>Line 2</th>
            <td>{{ physical.line2 }}</td>
          </tr>
          <tr>
            <th>Line 3</th>
            <td>{{ physical.line3 }}</td>
          </tr>
          <tr>
            <th>Country</th>
            <td>{{ physical.get_country_display }}</td>
          </tr>
          <tr>
            <th>Region</th>
            <td>{{ physical.region.region }}</td>
          </tr>
          <tr>
            <th>City</th>
            <td>{{ physical.city.city }}</td>
          </tr>
          <tr>
            <th>Suburb</th>
            <td>{{ physical.suburb.suburb }}</td>
          </tr>
          <tr>
            <th>Postal Code</th>
            <td>{{ physical.code }}</td>
          </tr>
        </tbody>
      </table>

    </div>
  </div>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Postal Address <a href="{% url 'Profile:PostalAddress' postal.talent.id %}" class="badge badge-primary">Edit</a></h5>
      <table class="table-small">
        <thead>
        </thead>
        <tbody>
          <tr>
            <th>Line 1</th>
            <td>{{ postal.line1 }}</td>
          </tr>
          <tr>
            <th>Line 2</th>
            <td>{{ postal.line2 }}</td>
          </tr>
          <tr>
            <th>Line 3</th>
            <td>{{ postal.line3 }}</td>
          </tr>
          <tr>
            <th>Country</th>
            <td>{{ postal.get_country_display }}</td>
          </tr>
          <tr>
            <th>Region</th>
            <td>{{ postal.region.region }}</td>
          </tr>
          <tr>
            <th>City</th>
            <td>{{ postal.city.city }}</td>
          </tr>
          <tr>
            <th>Suburb</th>
            <td>{{ postal.suburb.suburb }}</td>
          </tr>
          <tr>
            <th>Postal Code</th>
            <td>{{ postal.code }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Phone Numbers <a href="{% url 'Profile:PhoneNumberAdd' postal.talent.id %}" class="badge badge-primary">Add</a></h5>
      <div id="phone">
        <table class="table-small">
          <col width="20%">
          <col width="40%">
          <col width="20%">
          <thead>
            <tr>
              <th>Type</th>
              <th>Number</th>
            </tr>
          </thead>
          {% for phone in pnumbers %}
          <tbody>
            <tr>
              <td>{{ phone.type }}</td>
              <td>{{ phone.number }}</td>
              <td>
                <form  action="{% url 'Profile:PhoneDelete' phone.id %}" method="post">
                  {% csrf_token %}
                  <button type="submit" class="badge badge-danger badge-pill">Remove</button>
                </form>
              </td>
            </tr>
            {% empty %}
            <p>No Phone numbers entered.</p>
            {% endfor %}
          </tbody>
        </table>
      </div>

    </div>
  </div>
</div>
{% endblock content %}
