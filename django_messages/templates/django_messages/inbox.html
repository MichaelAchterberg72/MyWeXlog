{% extends "base_home.html" %}
{% load i18n %}

{% block content %}

<div class="card">
  <h5 class="card-header">{% trans "Inbox" %}</h5>
{% if message_list %}
<div class="container">
  {% if request.user.is_authenticated %}
  <p><a href="{% url 'messages_inbox' %}" class="badge badge-pill badge-primary">Inbox</a>
  <a href="{% url 'messages_outbox' %}" class="badge badge-pill badge-primary">Outbox</a>
  <a href="{% url 'messages_trash' %}" class="badge badge-pill badge-primary">Deleted</a></p>
  <p><a href="{% url 'messages_compose' %}" class="badge badge-pill badge-primary">New Message</a><a href="{% url 'messages_inbox' %}?next={{ request.path|urlencode }}" class="badge badge-pill badge-primary float-right">Back</a></p>
  {% endif %}
<table class="messages">
    <thead>
        <col width="20%">
        <col width="30%">
        <col width="15%">
        <col width="15%">
        <tr><th>{% trans "Sender" %}</th><th>{% trans "Subject" %}</th><th>{% trans "Received" %}</th><th>{% trans "Action" %}</th></tr>
    </thead>
    <tbody>
{% for message in message_list %}
    <tr>
        <td>{{ message.sender }}</td>
        <td>
            {% if message.new %}<strong>{% endif %}
            {% if message.replied %}<em>{% endif %}
            <a href="{{message.get_absolute_url }}">{{ message.subject }}</a>
            {% if message.replied %}</em>{% endif %}
            {% if message.new %}</strong>{% endif %}</td>
        <td>{{ message.sent_at|date:_("DATETIME_FORMAT") }}</td>
        <td><a href="{% url 'messages_delete' message.id %}" class="badge badge-pill badge-primary">{% trans "delete" %}</a></td>
    </tr>
{% endfor %}
    </tbody>
</table>
</div>
</div>
{% else %}
{% if request.user.is_authenticated %}
<p><a href="{% url 'messages_inbox' %}" class="badge badge-pill badge-primary">Inbox</a>
<a href="{% url 'messages_outbox' %}" class="badge badge-pill badge-primary">Outbox</a>
<a href="{% url 'messages_trash' %}" class="badge badge-pill badge-primary">Deleted</a></p>
<p><a href="{% url 'messages_compose' %}" class="badge badge-pill badge-primary">New Message</a><a href="{% url 'messages_inbox' %}?next={{ request.path|urlencode }}" class="badge badge-pill badge-primary float-right">Back</a></p>
{% endif %}
<p>{% trans "No messages." %}</p>
{% endif %}
</div>

{% endblock %}
