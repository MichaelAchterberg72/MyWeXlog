{% extends 'Profile/base_profile.html' %}
{% load humanize %}

{% block title %}My {{block.super}}{% endblock title %}


{% block network %}
<p>Summary of people within 5 levels of your network</p>
<h6>There are {{ tot }} people in your network tree</h6>
<table class="table table-sm">
  <thead>
    <tr>
      <th class="align-middle text-center">Level 1</th>
      <th class="align-middle text-center">Level 2</th>
      <th class="align-middle text-center">Level 3</th>
      <th class="align-middle text-center">Level 4</th>
      <th class="align-middle text-center">Level 5</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="align-middle text-center">{{ lvl_1 }}</td>
      <td class="align-middle text-center">{{ lvl_2 }}</td>
      <td class="align-middle text-center">{{ lvl_3 }}</td>
      <td class="align-middle text-center">{{ lvl_4 }}</td>
      <td class="align-middle text-center">{{ lvl_5 }}</td>
    </tr>
  </tbody>
</table>
{% endblock network %}

{% block workflow %}

<table class="table table-sm">
  <thead>
    <tr>
      <th></th>
      <th class="align-middle text-center">As Employer</th>
      <th class="align-middle text-center">As Talent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="align-middle text-center">Interviews Pending</td>
      <td class="align-middle text-center">
        <a href="{% url 'MarketPlace:EmployerInterviewHistory' request.user.alias %}?next={{ request.path|urlencode }}" class="btn btn-primary" style="width: 10rem">Interview History</a>
        <br>
        {% if interviews_emp %}
          {{ interviews_empc }}
        {% else %}
          None
        {% endif %}
      </td>
      <td class="align-middle text-center">
        <a href="{% url 'MarketPlace:TalentInterviewHistory' request.user.alias %}?next={{ request.path|urlencode }}" class="btn btn-primary 8rem" style="width: 10rem">Interview History</a>
        <br>
        {% if interviews_tlt %}
          {{ interviews_tltc }}
        {% else %}
          None
        {% endif %}
      </td>
    </tr>
  </tbody>
</table>
<br>
<p>Experience confirmations: <a href="{% url 'Profile:Confirm' %}" class="btn btn-info float-right" style="width: 8rem">{{ total }} Requests</a></p>

{% endblock workflow %}

{% block score %}
<table class="table table-sm">
  <thead>
    <tr>
      <th class="align-middle text-center">Detail</th>
      <th class="align-middle text-center">As Employer</th>
      <th class="align-middle text-center">As Talent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="align-middle text-center">Open Assignments</td>
      <td class="align-middle text-center">
        <a href="{% url 'Profile:WorkshopEmp' %}?next={{ request.path|urlencode }}" class="btn btn-primary" style="width: 10rem">Enter Office</a>
        <br>
        {% if open_assignments_empc  %}
          {{ open_assignments_empc }}
        {% else %}
          None
        {% endif %}
      </td>
      <td class="align-middle text-center">
        <a href="{% url 'Profile:WorkshopTlt' %}?next={{ request.path|urlencode }}" class="btn btn-primary" style="width: 10rem">Enter Workshop</a>
        <br>
        {% if open_assignments_tltc  %}
          {{ open_assignments_tltc }}
        {% else %}
          None
        {% endif %}
      </td>
    </tr>
  </tbody>
</table>
<br>
<p>Your Profile has been viewed: {% if request.user.subscription >= 1 %}<a href="{% url 'Profile:ProfileViewed' %}" class="btn btn-info float-right">Profile Viewed Report: {{ pvr_count }} times</a>{% else %}<span class="float-right"><strong>{{ pvr_count }}</strong> times.</span>{% endif %}</p>

{% endblock score %}

{% block TBA %}
  <div class="text-center">
    <a href="{% url 'Talent:APV' tlt=request.user.alias vac='1ad9t2' %}?next={{ request.path|urlencode }}" target="_blank"><i class="fa fa-id-badge" aria-hidden="true"style="font-size:30px;color:black" data-toggle="tooltip" data-placement="top" title="Public Profile"></i></a>
    &nbsp &nbsp
    <a href="{% url 'Talent:DPCSum' tlt %}?next={{ request.path|urlencode }}"><i class="fa fa-industry" style="font-size:30px;color:black" data-toggle="tooltip" title="View Summary for Industry, Project and Designation."></i></a>
    &nbsp &nbsp
    <a href="{% url 'BookList:VPBL' tlt=request.user.alias %}?next={{ request.path|urlencode }}" class=""><i class="fa fa-book" aria-hidden="true" style="font-size:30px;color:black" data-toggle="tooltip" title="Book Summary"></i></a>
    &nbsp &nbsp
    <a href="{% url 'Talent:SPDView' tlt=request.user.alias %}?next={{ request.path|urlencode }}"><i class="fa fa-database" aria-hidden="true" style="font-size:30px;color:black" data-toggle="tooltip" title="Skills Summary"></i></a>
    &nbsp &nbsp
    <a href="{% url 'Talent:Capture' %}"><i class="fa fa-graduation-cap" aria-hidden="true" style="font-size:30px;color:black" data-toggle="tooltip" title="Capture Training"></i></a>
    &nbsp &nbsp
    <a href="{% url 'Talent:ExperienceCapture' %}" class=""><i class="fa fa-laptop" aria-hidden="true" style="font-size:34px;color:black" data-toggle="tooltip" title="Capture Experience"></i></a>
    &nbsp &nbsp
    <a href="{% url 'BookList:books-read-new' %}" class=""><i class="fa fa-bookmark-o" aria-hidden="true" style="font-size:34px;color:black" data-toggle="tooltip" title="Capture Book"></i></a>
    &nbsp &nbsp
    {% if user.subscription < 1 %}
        <a href="#" class=""><i class="fa fa-map-signs" aria-hidden="true" style="font-size:34px;color:black" data-toggle="tooltip" title="Vacancy Search (Not available to free users)"></i></a>
    {% else %}
      <a href="{% url 'MarketPlace:VacSearch' %}" class=""><i class="fa fa-map-signs" aria-hidden="true" style="font-size:34px;color:black" data-toggle="tooltip" title="Vacancy Search"></i></a>
    {% endif %}
    &nbsp &nbsp
    <a href="{% url 'Talent:PflSearch' %}" class=""><i class="fa fa-users" aria-hidden="true" style="font-size:34px;color:black" data-toggle="tooltip" title="Profile Search"></i></a>
  </div>
    <hr>
    <div class="text-center">
      {% if pfl.rate_count >= 5 %}
        <p style="font-size:20px;color:black">
          Your Rating:
          {% if pfl.avg_rate >= 0 and pfl.avg_rate < 0.5 %}
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
          {% elif pfl.avg_rate >= 0.5 and pfl.avg_rate < 1 %}
            <span><i class="fa fa-star-half-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
          {% elif pfl.avg_rate >= 1 and pfl.avg_rate < 1.5 %}
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
          {% elif pfl.avg_rate >= 1.5 and pfl.avg_rate < 2 %}
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-half-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
          {% elif pfl.avg_rate >= 2 and pfl.avg_rate < 2.5 %}
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
          {% elif pfl.avg_rate >= 2.5 and pfl.avg_rate < 3 %}
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-half-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
          {% elif pfl.avg_rate >= 3 and pfl.avg_rate < 3.5 %}
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
          {% elif pfl.avg_rate >= 3.5 and pfl.avg_rate < 4 %}
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-half-o" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
          {% elif pfl.avg_rate >= 4 and pfl.avg_rate < 4.5 %}
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-o" aria-hidden="true"></i></span>
          {% elif pfl.avg_rate >= 4.5 and pfl.avg_rate < 4.95 %}
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star-half-o" aria-hidden="true"></i></span>
          {% elif pfl.avg_rate >= 4.95 %}
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
            <span><i class="fa fa-star" aria-hidden="true"></i></span>
          {% endif %}
          {{ pfl.avg_rate|floatformat:2 }} from {{ pfl.rate_count|intcomma }} votes
          <a href="{% url 'Talent:TltRatingDetail' pfl.alias %}" style="font-size:20px;color:black" target="_blank" data-toggle="tooltip" title="Ratings Breakdown"><i class="fa fa-pie-chart" aria-hidden="true"></i></a>
      {% else %}
        Ratings calculated over 5 or more votes, you currently have {{ pfl.rate_count|intcomma }}.
      {% endif %}
    </p>
    </div>
    <div class="">
      <p>
        Referral link:
        <hr>
        <input type="text" class="form-control" value="{{ referral_code.url }}" id="myInput">
<!--        <button class="btn btn-secondary" id="myButton">Copy Link</button> -->
        <hr>
        Copy and past the above url address into an email or a Social Netowrk Post for your firends to join MyWeXlog in your network.
      </p>
    </div>

 {% endblock TBA %}

{% block Center_Content %}
{% if interviews_tlt or interviews_emp %}
<div class="card border-0">
  <div class="card-body">
    <div class="float-right">
      <a href="{% url 'Profile:HelpDesktopPendingInterviews' %}" target="_blank" class="align-middle" data-toggle="tooltip" title="Click here for help on this page!" style="font-size: 27px" data-toggle="tooltip" title="Click here for help on this page!">
      <i class="icon icon-question-circle"></i></a>
    </div>
    <h4 class="card-title" id="Interview">Pending Interviews</h4>

<table class="table table-hover table-sm">
  <col width="50%">
  <col width="15%">
  <col width="15%">
  <col width="10%">
  <col width="10%">
  <thead>
    <tr>
      <th class="align-middle text-left">Vacancy</th>
      <th class="align-middle text-center">Configeration</th>
      <th class="align-middle text-center">Reference</th>
      <th class="align-middle text-center">Invitation Date</th>
      <th class="align-middle text-center"></th>
    </tr>
  </thead>
  <tbody>
    {% if interviews_tlt %}
      <tr class="no-hover">
        <td colspan="3"><h5><strong>As a Candidate</strong></h5></td>
      </tr>
      {% for tlt_i in interviews_tlt %}
      <tr>
        <td class="align-middle text-left">{{ tlt_i.scope }}</td>
        <td class="align-middle text-center">{{ tlt_i.scope.worklocation }}</td>
        <td class="align-middle text-center">{{ tlt_i.scope.ref_no }}</td>
        <td class="align-middle text-center">{{ tlt_i.date_listed|date:"j M Y" }}</td>
        {% if request.user.subscription >= 1 %}
          <td><a href="{% url 'MarketPlace:VacancyDetail_Profile' tlt_i.scope.ref_no %}?next={{ request.path|urlencode }}" class="badge badge-info badge-pill" style="width: 7rem">See Detail</a>
          {% if tlt_i.tlt_response == 'P' %}
            <a href="{% url 'Profile:IntAccept' tlt_i.id %}?next={{ request.path|urlencode }}" class="badge badge-success badge-pill" style="width: 7rem">Accept<br>Invitation</a>

            <a href="{% url 'Profile:IntDecline' tlt_i.id %}?next={{ request.path|urlencode }}" class="badge badge-danger badge-pill" style="width: 7rem">Decline<br>Invitation</a></td>
          {% endif %}
          {% if tlt_i.tlt_response == 'A' %}
            <a href="{% url 'Profile:IntComplete' tlt_i.id %}?next={{ request.path|urlencode }}" class="badge badge-success badge-pill" style="width: 7rem">Interview<br>Completed</a>
          {% endif %}
        {% endif %}
      </tr>
      {% empty %}
        <tr>
          <td colspan="5">You currently don't have any interviews.</td>
        </tr>
      {% endfor %}
    {% endif %}

    {% if interviews_emp %}
      <tr class="no-hover">
        <td colspan="3"><h5><strong>As an Employer</strong></h5></td>
      </tr>
      {% for tlt_e in interviews_emp %}
        <tr>
          <td class="align-middle text-left">{{ tlt_e.scope }}</td>
          <td class="align-middle text-center">{{ tlt_e.scope.worklocation }}</td>
          <td class="align-middle text-center">{{ tlt_e.scope.ref_no }}</td>
          <td class="align-middle text-center">{{ tlt_e.date_listed|date:"j M Y" }}</td>
          <td class="align-middle">
            {% if tlt_e.tlt_response == 'P' %}
              <p class="badge badge-info badge-pill" style="width: 7rem">Response<br>Pending</p>
            {% elif tlt_e.tlt_response == 'A' %}
              <p class="badge badge-info badge-pill" style="width: 7rem">Interview<br>Accepted</p>
              <a href="{% url 'MarketPlace:InterviewList' tlt_e.scope.ref_no   %}" class="badge badge-success badge-pill" style="width: 7rem">Interview Page</a>
            {% elif tlt_e.tlt_response == 'D' %}
              <p class="badge badge-danger badge-pill" style="width: 7rem">Interview<br>Declined</p>
              <a href="{% url 'Profile:IntRemove' tlt_e.alias %}?next={{ request.path|urlencode }}" class="badge badge-info badge-pill" style="width: 7rem">Remove</a>
            {% endif %}
          </td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="5">None at the moment.</td>
        </tr>
      {% endfor %}
    {% endif %}
  </tbody>
</table>
</div>
</div>
<br>
{% endif %}

{% if assigned_tlt or assigned_emp %}
<div class="card border-0">
  <div class="card-body">
    <h4 class="card-title" id="Assignment">Assignments<span><p class="float-right">
    <a href="{% url 'Profile:HelpDesktopAssignments' %}" target="_blank" class="align-middle" data-toggle="tooltip" title="Click here for help on this page!" style="font-size: 27px" data-toggle="tooltip" title="Click here for help on this page!">
    <i class="icon icon-question-circle"></i></a>
  </p></span></h4>

<table class="table table-hover table-sm">
  <col width="45%">
  <col width="10%">
  <col width="15%">
  <col width="10%">
  <col width="10%">
  <col width="4%">
  <thead>
    <tr>
      <th class="align-middle text-center">Vacancy<br>(Reference)</th>
      <th class="align-middle text-center">Date Assigned</th>
      <th class="align-middle text-center">Offered Rate</th>
      <th class="align-middle text-center">Assignment Start</th>
      <th class="align-middle text-center">Assignment Completed</th>
      <th class="align-middle text-center"></th>
    </tr>
  </thead>
  <tbody>
    {% if assigned_tlt %}
    <tr class="no-hover">
      <td colspan="6"><h5><strong>As Talent ({{ assigned_tltc }} in Workflow)</strong></h5></td>
    </tr>
    {% for psn in assigned_tlt %}
    <tr>
      <td class="align-middle text-left">{{ psn.work }}<br>({{ psn.work.ref_no }})</td>
      <td class="align-middle text-left">{{ psn.date_create|date:"j M Y" }}</td>
      <td class="align-middle text-center">{{ psn.currency.currency_abv }} {{ psn.rate_offered }}<br>{{psn.get_rate_unit_display}}</td>
      <td class="align-middle text-center">{{ psn.date_begin|date:"j M Y" }}</td>
      <td class="align-middle text-center">{{ psn.date_deliverable|date:"j M Y" }}</td>
        <td>
          <a href="{% url 'MarketPlace:VacancyDetail_Profile' psn.work.ref_no %}?next={{ request.path|urlencode }}" target="_blank" class="badge badge-info badge-pill" style="width: 7rem;">See Detail</a>
          <a href="{% url 'Profile:AssignmentAccept' psn.slug %}?next={{ request.path|urlencode }}" class="badge badge-success badge-pill" style="width: 7rem">Accept<br>Assignment</a>
          {% if psn.tlt_response == 'C' %}
            <a href="#" class="badge badge-warning badge-pill" style="width: 7rem">Await<br>Information</a>
          {% else %}
            <a href="{% url 'Profile:AssignmentClarify' psn.slug %}?next={{ request.path|urlencode }}" class="badge badge-info badge-pill" style="width: 7rem">Request<br>Information</a>
          {% endif %}
          <a href="{% url 'Profile:AssignmentDecline' psn.slug %}?next={{ request.path|urlencode }}" class="badge badge-danger badge-pill" style="width: 7rem">Decline<br>Assignment</a>
      </td>
    </tr>
    {% endfor %}
    {% endif %}
    {% if assigned_emp %}
    <tr  class="no-hover">
      <td colspan="6"><h5><strong>As an Employer ({{ assigned_empc }} in Workflow)</strong></h5></td>
    </tr>
    {% for psn in assigned_emp %}
    <tr>
      <td class="align-middle text-left">{{ psn.work }}<br>({{ psn.work.ref_no }})</td>
      <td class="align-middle text-left">{{ psn.date_create|date:"j M Y" }}</td>
      <td class="align-middle text-center">{{ psn.currency.currency_abv }} {{ psn.rate_offered }}<br>{{psn.get_rate_unit_display}}</td>
      <td class="align-middle text-center">{{ psn.date_begin|date:"j M Y" }}</td>
      <td class="align-middle text-center">{{ psn.date_deliverable|date:"j M Y" }}</td>
      {% if psn.tlt_response == 'C' %}
        <td>
            <a href="{% url 'MarketPlace:RFIView' psn.slug %}?next={{ request.path|urlencode }}" class="badge badge-warning badge-pill" style="width: 7rem">Clarification<br>Requested</a>
        </td>
      {% elif psn.tlt_response == 'P' %}
      <td>
          <a href="#" class="badge badge-info badge-pill" style="width: 7rem">Response<br>Pending</a>
      </td>
      {% elif psn.tlt_response == 'D' %}
      <td>
          <a href="#" class="badge badge-danger badge-pill" style="width: 7rem">Vacancy<br>Declined</a>
          <a href="{% url 'Profile:AssignmentReassign' psn.slug %}?next={{ request.path|urlencode }}" class="badge badge-warning badge-pill" style="width: 7rem; height: 3rem">ReAssign<br>Vacancy</a>
      </td>
      {% elif psn.tlt_response == 'A' %}
      <td>
          <a href="#" class="badge badge-success badge-pill" style="width: 7rem">Vacancy<br>Accpeted</a>
      </td>
      {% endif %}
      {% if psn.tlt_response == 'D' %}
      <tr>
        <td colspan="4">{{ psn.comments }}</td>
        <th>Reason:</th>
        <td>{{ psn.tlt_decline_reason }}</td>
      </tr>
      {% elif psn.tlt_response == 'A' %}
      <tr>
        <td colspan="5">Please contact the Talent directly at <a href="emailto:{{ psn.talent.email }}">{{ psn.talent.email }}</a></td>
      </tr>
      {% endif %}
    {% endfor %}
    {% endif %}
  </tr>
  </tbody>
</table>
</div>
</div>
{% endif %}

{% endblock Center_Content %}
