{% extends 'Profile/base_profile.html' %}

{% block title %}My {{block.super}}{% endblock title %}


{% block network %}
<p>Summary of people within 5 levels of your network</p>
<h6>There are {{ tot }} people in your network tree</h6>
<table class="table table-sm">
  <thead>
    <tr>
      <th class="align-middle text-center">Level 1</th>
      <th class="align-middle text-center">Level 2</th>
      <th class="align-middle text-center">Level 3</th>
      <th class="align-middle text-center">Level 4</th>
      <th class="align-middle text-center">Level 5</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="align-middle text-center">{{ lvl_1 }}</td>
      <td class="align-middle text-center">{{ lvl_2 }}</td>
      <td class="align-middle text-center">{{ lvl_3 }}</td>
      <td class="align-middle text-center">{{ lvl_4 }}</td>
      <td class="align-middle text-center">{{ lvl_5 }}</td>
    </tr>
  </tbody>
</table>
{% endblock network %}

{% block workflow %}
<p>Experience confirmations: <a href="{% url 'Profile:Confirm' %}"class="btn btn-info float-right" style="width: 8rem">{{ total }}</a></p>
<br>
<table class="table table-sm">
  <thead>
    <tr>
      <th></th>
      <th class="align-middle text-center">As Employer</th>
      <th class="align-middle text-center">As Talent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="align-middle text-center">Interviews Pending</td>
      <td class="align-middle text-center">
        <a href="{% url 'MarketPlace:EmployerInterviewHistory' request.user.alias %}?next={{ request.path|urlencode }}" class="badge badge-primary" style="width: 8rem">Interview History</a>
        <br>
        {% if interviews_emp %}
          {{ interviews_empc }}
        {% else %}
          None
        {% endif %}
      </td>
      <td class="align-middle text-center">
        <a href="{% url 'MarketPlace:TalentInterviewHistory' request.user.alias %}?next={{ request.path|urlencode }}" class="badge badge-primary 8rem" style="width: 8rem">Interview History</a>
        <br>
        {% if interviews_tlt %}
          {{ interviews_tltc }}
        {% else %}
          None
        {% endif %}
      </td>
    </tr>
  </tbody>
</table>

{% endblock workflow %}

{% block score %}
<table class="table table-sm">
  <thead>
    <tr>
      <th class="align-middle text-center">Detail</th>
      <th class="align-middle text-center">As Employer</th>
      <th class="align-middle text-center">As Talent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="align-middle text-center">Open Assignments</td>
      <td class="align-middle text-center">
        <a href="{% url 'Profile:WorkshopEmp' %}?next={{ request.path|urlencode }}" class="badge badge-primary" style="width: 8rem">Enter Office</a>
        <br>
        {% if open_assignments_empc  %}
          {{ open_assignments_empc }}
        {% else %}
          None
        {% endif %}
      </td>
      <td class="align-middle text-center">
        <a href="{% url 'Profile:WorkshopTlt' %}?next={{ request.path|urlencode }}" class="badge badge-primary" style="width: 8rem">Enter Workshop</a>
        <br>
        {% if open_assignments_tltc  %}
          {{ open_assignments_tltc }}
        {% else %}
          None
        {% endif %}
      </td>
    </tr>
  </tbody>
</table>
{% endblock score %}

{% block TBA %}
  <div class="justify-content">
    <div class="tooltip">hover<span class="tooltiptext">Public Profile</span></div>
    <a href="{% url 'Talent:APV' tlt=request.user.alias vac='1ad9t2' %}?next={{ request.path|urlencode }}" target="_blank"><i class="fa fa-id-badge" aria-hidden="true"style="font-size:30px;color:black" data-toggle="tooltip" title="Public Profile"></i></a>

    &nbsp &nbsp
    <a href="{% url 'Talent:DPCSum' %}?next={{ request.path|urlencode }}"><i class="fa fa-industry" style="font-size:30px;color:black" data-toggle="tooltip" title="View Summary for Industry, Project and Designation."></i></a>
    &nbsp &nbsp
    <a href="{% url 'BookList:VPBL' tlt=request.user.alias %}?next={{ request.path|urlencode }}" class=""><i class="fa fa-book" aria-hidden="true" style="font-size:30px;color:black" data-toggle="tooltip" title="Book Summary"></i></a>
    &nbsp &nbsp
    <a href="{% url 'Talent:SPDView' tlt=request.user.alias %}?next={{ request.path|urlencode }}"><i class="fa fa-database" aria-hidden="true" style="font-size:30px;color:black" data-toggle="tooltip" title="Skills Summary"></i></a>
    &nbsp &nbsp
    <a href="{% url 'Talent:Capture' %}"><i class="fa fa-graduation-cap" aria-hidden="true" style="font-size:30px;color:black" data-toggle="tooltip" title="Capture Training"></i></a>
    &nbsp &nbsp
    <a href="{% url 'Talent:Capture' %}" class=""><i class="fa fa-laptop" aria-hidden="true" style="font-size:34px;color:black" data-toggle="tooltip" title="Capture Experience"></i></a>
    &nbsp &nbsp
    <a href="{% url 'BookList:books-read-new' %}" class=""><i class="fa fa-bookmark-o" aria-hidden="true" style="font-size:34px;color:black" data-toggle="tooltip" title="Capture Book"></i></a>
  </div>
 {% endblock TBA %}

{% block Center_Content %}
{% if interviews_tlt or interviews_emp %}
<div class="card border-0">
  <div class="card-body">
    <div class="float-right">
      <a href="{% url 'Profile:HelpDesktopPendingInterviews' %}" target="_blank" class="align-middle" data-toggle="tooltip" title="Click here for help on this page!" style="font-size: 27px" data-toggle="tooltip" title="Click here for help on this page!">
      <i class="icon icon-question-circle"></i></a>
    </div>
    <h4 class="card-title" id="Interview">Pending Interviews</h4>

<table class="table table-hover table-sm">
  <col width="50%">
  <col width="15%">
  <col width="15%">
  <col width="10%">
  <col width="10%">
  <thead>
    <tr>
      <th class="align-middle text-left">Vacancy</th>
      <th class="align-middle text-center">Configeration</th>
      <th class="align-middle text-center">Reference</th>
      <th class="align-middle text-center">Invitation Date</th>
      <th class="align-middle text-center"></th>
    </tr>
  </thead>
  <tbody>
    {% if interviews_tlt %}
    <tr class="no-hover">
      <td colspan="3"><h6>As a Candidate</h6></td>
    </tr>
    {% for tlt_i in interviews_tlt %}
    <tr>
      <td class="align-middle text-left">{{ tlt_i.scope }}</td>
      <td class="align-middle text-center">{{ tlt_i.scope.worklocation }}</td>
      <td class="align-middle text-center">{{ tlt_i.scope.ref_no }}</td>
      <td class="align-middle text-center">{{ tlt_i.date_listed|date:"j M Y" }}</td>
      {% if request.user.subscription >= 1 %}
        <td><a href="{% url 'MarketPlace:VacancyDetail_Profile' tlt_i.scope.ref_no %}?next={{ request.path|urlencode }}" class="badge badge-info badge-pill" style="width: 7rem">See Detail</a>
      {% if tlt_i.tlt_response == 'P' %}
        <a href="{% url 'Profile:IntAccept' tlt_i.id %}?next={{ request.path|urlencode }}" class="badge badge-success badge-pill" style="width: 7rem">Accept<br>Invitation</a>
        <a href="{% url 'Profile:IntDecline' tlt_i.id %}?next={{ request.path|urlencode }}" class="badge badge-danger badge-pill" style="width: 7rem">Decline<br>Invitation</a></td>
      {% endif %}
      {% if tlt_i.tlt_response == 'A' %}
        <a href="{% url 'Profile:IntComplete' tlt_i.id %}?next={{ request.path|urlencode }}" class="badge badge-success badge-pill" style="width: 7rem">Interview<br>Completed</a>
      {% endif %}
      {% endif %}
    </tr>
    {% empty %}
    <tr>
      <td colspan="5">You currently don't have any interviews.</td>
    </tr>
    {% endfor %}
    {% endif %}
    {% if interviews_emp %}
    <tr class="no-hover">
      <td colspan="3"><h6>As an Employer</h6></td>
    </tr>
    {% for tlt_e in interviews_emp %}
    <tr>
      <td class="align-middle text-left">{{ tlt_e.scope }}</td>
      <td class="align-middle text-center">{{ tlt_e.scope.worklocation }}</td>
      <td class="align-middle text-center">{{ tlt_e.scope.ref_no }}</td>
      <td class="align-middle text-center">{{ tlt_e.date_listed|date:"j M Y" }}</td>
      <td class="align-middle">
        {% if tlt_e.tlt_response == 'P' %}
          <p class="badge badge-info badge-pill" style="width: 7rem">Response<br>Pending</p>
        {% elif tlt_e.tlt_response == 'A' %}
          <p class="badge badge-info badge-pill" style="width: 7rem">Interview<br>Accepted</p>
          <a href="{% url 'MarketPlace:InterviewList' tlt_e.scope.ref_no   %}" class="badge badge-success badge-pill" style="width: 7rem">Interview Page</a>
        {% elif tlt_e.tlt_response == 'D' %}
          <p class="badge badge-danger badge-pill" style="width: 7rem">Interview<br>Declined</p>
          <a href="{% url 'Profile:IntRemove' tlt_e.alias %}?next={{ request.path|urlencode }}" class="badge badge-info badge-pill" style="width: 7rem">Remove</a>
        {% endif %}
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="5">None at the moment.</td>
    </tr>
    {% endfor %}
    {% endif %}
  </tbody>
</table>
</div>
</div>
<br>
{% endif %}

{% if assigned_tlt or assigned_emp %}
<div class="card border-0">
  <div class="card-body">
    <h4 class="card-title" id="Assignment">Assignments<span><p class="float-right">
    <a href="{% url 'Profile:HelpDesktopAssignments' %}" target="_blank" class="align-middle" data-toggle="tooltip" title="Click here for help on this page!" style="font-size: 27px" data-toggle="tooltip" title="Click here for help on this page!">
    <i class="icon icon-question-circle"></i></a>
  </p></span></h4>

<table class="table table-hover table-sm">
  <col width="45%">
  <col width="10%">
  <col width="15%">
  <col width="10%">
  <col width="10%">
  <col width="4%">
  <thead>
    <tr>
      <th class="align-middle text-center">Vacancy<br>(Reference)</th>
      <th class="align-middle text-center">Date Assigned</th>
      <th class="align-middle text-center">Offered Rate</th>
      <th class="align-middle text-center">Assignment Start</th>
      <th class="align-middle text-center">Assignment Completed</th>
      <th class="align-middle text-center"></th>
    </tr>
  </thead>
  <tbody>
    {% if assigned_tlt %}
    <tr class="no-hover">
      <td colspan="6"><h6>As Talent ({{ assigned_tltc }} in Workflow)</h6></td>
    </tr>
    {% for psn in assigned_tlt %}
    <tr>
      <td class="align-middle text-left">{{ psn.work }}<br>({{ psn.work.ref_no }})</td>
      <td class="align-middle text-left">{{ psn.date_create|date:"j M Y" }}</td>
      <td class="align-middle text-center">{{ psn.currency.currency_abv }} {{ psn.rate_offered }}<br>{{psn.get_rate_unit_display}}</td>
      <td class="align-middle text-center">{{ psn.date_begin|date:"j M Y" }}</td>
      <td class="align-middle text-center">{{ psn.date_deliverable|date:"j M Y" }}</td>
        <td>
          <a href="{% url 'MarketPlace:VacancyDetail_Profile' psn.work.ref_no %}?next={{ request.path|urlencode }}" target="_blank" class="badge badge-info badge-pill" style="width: 7rem;">See Detail</a>
          <a href="{% url 'Profile:AssignmentAccept' psn.slug %}?next={{ request.path|urlencode }}" class="badge badge-success badge-pill" style="width: 7rem">Accept<br>Assignment</a>
          {% if psn.tlt_response == 'C' %}
            <a href="#" class="badge badge-warning badge-pill" style="width: 7rem">Await<br>Information</a>
          {% else %}
            <a href="{% url 'Profile:AssignmentClarify' psn.slug %}?next={{ request.path|urlencode }}" class="badge badge-info badge-pill" style="width: 7rem">Request<br>Information</a>
          {% endif %}
          <a href="{% url 'Profile:AssignmentDecline' psn.slug %}?next={{ request.path|urlencode }}" class="badge badge-danger badge-pill" style="width: 7rem">Decline<br>Assignment</a>
      </td>
    </tr>
    {% endfor %}
    {% endif %}
    {% if assigned_emp %}
    <tr  class="no-hover">
      <td colspan="6"><h6>As an Employer ({{ assigned_empc }} in Workflow)</h6></td>
    </tr>
    {% for psn in assigned_emp %}
    <tr>
      <td class="align-middle text-left">{{ psn.work }}<br>({{ psn.work.ref_no }})</td>
      <td class="align-middle text-left">{{ psn.date_create|date:"j M Y" }}</td>
      <td class="align-middle text-center">{{ psn.currency.currency_abv }} {{ psn.rate_offered }}<br>{{psn.get_rate_unit_display}}</td>
      <td class="align-middle text-center">{{ psn.date_begin|date:"j M Y" }}</td>
      <td class="align-middle text-center">{{ psn.date_deliverable|date:"j M Y" }}</td>
      {% if psn.tlt_response == 'C' %}
        <td>
            <a href="{% url 'MarketPlace:RFIView' psn.slug %}?next={{ request.path|urlencode }}" class="badge badge-warning badge-pill" style="width: 7rem">Clarification<br>Requested</a>
        </td>
      {% elif psn.tlt_response == 'P' %}
      <td>
          <a href="#" class="badge badge-info badge-pill" style="width: 7rem">Response<br>Pending</a>
      </td>
      {% elif psn.tlt_response == 'D' %}
      <td>
          <a href="#" class="badge badge-danger badge-pill" style="width: 7rem">Vacancy<br>Declined</a>
          <a href="{% url 'Profile:AssignmentReassign' psn.slug %}" class="badge badge-warning badge-pill" style="width: 7rem; height: 3rem">ReAssign<br>Vacancy</a>
      </td>
      {% elif psn.tlt_response == 'A' %}
      <td>
          <a href="#" class="badge badge-success badge-pill" style="width: 7rem">Vacancy<br>Accpeted</a>
      </td>
      {% endif %}
      {% if psn.tlt_response == 'D' %}
      <tr>
        <td colspan="4">{{ psn.comments }}</td>
        <th>Reason:</th>
        <td>{{ psn.tlt_decline_reason }}</td>
      </tr>
      {% elif psn.tlt_response == 'A' %}
      <tr>
        <td colspan="5">Please contact the Talent directly at <a href="emailto:{{ psn.talent.email }}">{{ psn.talent.email }}</a></td>
      </tr>
      {% endif %}
    {% endfor %}
    {% endif %}
  </tr>
  </tbody>
</table>
</div>
</div>
{% endif %}
{% endblock Center_Content %}
