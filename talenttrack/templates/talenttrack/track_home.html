{% extends "base_home.html" %}
{% load humanize %}
{% block title %}{{block.super}}-Experience{% endblock title %}

{% block content %}
<div class="card border-0" style="width: 100%;">
  <div class="card-body">
    <div class="float-right">
      <a href="{% url 'Talent:HelpExperienceHome' %}" target="_blank" class="align-middle" data-toggle="tooltip" title="Click here for help on this page!" style="font-size: 27px" data-toggle="tooltip" title="Click here for help on this page!">
      <i class="icon icon-question-circle"></i></a>
    </div>
    <h4 class="card-title">Experience Summary</h4>
    <table class="table table-sm">
      <col width = "20%">
      <col width = "20%">
      <col width = "20%">
      <col width = "20%">
      <col width = "20%">
      <thead>
        <tr>
          <th></th>
          <th class="align-middle text-center">Total Hours Logged</th>
          <th class="align-middle text-center">Training<br>(Hours)<br><a href="{% url 'Talent:Capture' %}" class="badge badge-pill badge-primary">Add</a></th>
          <th class="align-middle text-center">Logged<br>(Hours)<br><a href="{% url 'Talent:ExperienceCapture' %}" class="badge badge-pill badge-primary">Add</a></th>
          <th class="align-middle text-center">Pre-logged<br>(Hours)<br><a href="{% url 'Talent:PreloggedCapture' %}" class="badge badge-pill badge-primary">Add</a></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th class="align-middle text-center">Unconfirmed<br>Experience</th>
          <td class="align-middle text-center">{{ tot_sum|intcomma }}</td>
          <td class="align-middle text-center">{{ train_sum.Edu_sum|intcomma }}<br>{{ train_count }} skills</td>
          <td class="align-middle text-center">{{ exp_sum.we_sum|intcomma }}<br>{{ exp_count }} skills</td>
          <td class="align-middle text-center">{{ pre_sum.p_sum|intcomma }}<br>{{ pre_count }} skills</td>
        </tr>
        <tr>
          <th class="align-middle text-center">Confirmed<br>Experience</th>
          <td class="align-middle text-center">{{ tot_sum_c|intcomma }}</td>
          <td class="align-middle text-center">{{ train_sum_c.Edu_sumc|intcomma }}<br>{{ train_count_c }} skills</td>
          <td class="align-middle text-center">{{ exp_sum_c.we_sumc|intcomma }}<br>{{ exp_count_c }} skills</td>
          <td class="align-middle text-center">{{ pre_sum_c.p_sumc|intcomma }}<br>{{ pre_count_c }} skills</td>
        </tr>
      </tbody>
    </table>
    <div class="float-right">
      <p>
        <a href="{% url 'Talent:DPCSum' %}" class="badge badge-pill badge-primary">Designation, Project & Company Summary</a>
        <a href="{% url 'Talent:ExperienceSum' %}" class="badge badge-pill badge-primary">Skills Summary</a>
      </p>
    </div>

    <p data-toggle="tooltip" data-placement="top" title="Logged + Pre-logged hours">Experience Level: <strong>{{ level }}</strong></p>

    <table class="table table-sm">
      <thead>
        <tr align="middle">
          <th class="align-middle text-center">Total Skills</th>
          <th class="align-middle text-center">Skills List</th>
        </tr>
      </thead>
      <tbody>
        <tr align="center">
          <td>{{ skill_count }}</td>
          <td>{{ skill_name|join:" || " }}</td>
        </tr>
      </tbody>
    </table>
    <p>&nbsp</p>
  </div>
</div>
<br>
<div class="card border-0" style="width: 100%;">
  <div class="card-body">
    <div class="float-right">
      <a href="{% url 'Talent:HelpExperienceEducation' %}" target="_blank" class="align-middle" data-toggle="tooltip" title="Click here for help on this page!" style="font-size: 27px" data-toggle="tooltip" title="Click here for help on this page!">
      <i class="icon icon-question-circle"></i></a>
    </div>
    <h4 class="card-title">Education & Training</h4>
    <p>There are a total of {{ train_count }} Training & Education experience items that have been captured{% if train_count >= 5 %}, we only list the most recent 5 here.{% else %}.{% endif %}</p>
    <br>
    <div class="float-right">
      <p><a href="{% url 'Talent:Capture' %}" class="badge badge-pill badge-primary float-right">Add Education</a></p>
    </div>
      <p><strong>Total hours in training: </strong>{{ train_sum.Edu_sum|intcomma }}</p>
    <div>
    <table class="table table-hover table-sm">
      <thead>
        <tr>
          <th class="align-middle text-center">Start Date</th>
          <th class="align-middle text-center">Completion Date</th>
          <th class="align-middle text-center">Course</th>
          <th class="align-middle text-center">Time Logged</th>
          <th class="align-middle text-center" data-toggle="tooltip" data-placement="top" title="A score > 3 is required to achieve a 'confirmed' status">Score</th>
          <th class="align-middle text-center">Options</th>
        </tr>
      </thead>
      {% for t in train %}
      <tbody>
        <tr onclick="window.location='{% url 'Talent:EducationDetail' t.slug %}'">
          <td class="align-middle text-center">{{ t.date_from|date:"j M Y" }}</td>
          <td class="align-middle text-center">{{ t.date_to|date:"j M Y" }}</td>
          <td class="align-middle text-center">{{ t.course }}</td>
          <td class="align-middle text-center">{{ t.topic.hours|intcomma }}</td>
          <td class="align-middle text-center" data-toggle="tooltip" data-placement="top" title="A score > 3 is required to achieve a 'confirmed' status">{{ t.score }}</td>
          <td class="align-middle text-center"><div class="float-right">
            <a href="{% url 'Talent:EducationDetail' t.slug %}" class="badge badge-pill badge-secondary" style="width: 5rem;">Detail</a>
            <form  action="{% url 'Talent:EDTDelete' t.id %}" method="post">
              {% csrf_token %}
              <button type="submit" class="badge badge-danger badge-pill" style="width: 5rem;">Remove</button>
            </form></div>
          </td>
        </tr>
      </tbody>
    {% endfor %}
    </table>
    {% if train_count > 5 %}
    <div class="float-right">
      <p><a href="{% url 'Talent:TrainingList' %}" class="btn btn-primary float-right">View All Education</a></p>
    </div>
    {% endif %}
    <p>&nbsp</p>
    </div>
  </div>
</div>
<br>
<div class="card border-0" style="width: 100%;">
  <div class="card-body">
    <div class="float-right">
      <a href="{% url 'Talent:HelpExperienceExperience' %}" target="_blank" class="align-middle" data-toggle="tooltip" title="Click here for help on this page!" style="font-size: 27px" data-toggle="tooltip" title="Click here for help on this page!">
      <i class="icon icon-question-circle"></i></a>
    </div>
    <h4 class="card-title">Work Experience</h4>
    <p>There are a total of {{ exp_count }} Experience items that have been captured{% if exp_count >= 5 %}, we only list the most recent 5 here.{% else %}.{% endif %}</p>
    <br>
      <div class="float-right">
        <p><a href="{% url 'Talent:ExperienceCapture' %}" class="badge badge-pill badge-primary float-right">Add Experience</a></p>
      </div>
        <p><strong>Total hours of Experience: </strong>{{ exp_sum.we_sum|intcomma }}</p>
      <table class="table table-hover table-sm">
        <thead>
          <tr>
            <th class="align-middle text-center">Employer</th>
            <th class="align-middle text-center">Date from</th>
            <th class="align-middle text-center">Date to</th>
            <th class="align-middle text-center">Hours</th>
            <th class="align-middle text-center">Project</th>
            <th class="align-middle text-center" data-toggle="tooltip" data-placement="top" title="A score > 3 is required to achieve a 'confirmed' status">Score</th>
            <th class="align-middle text-center">Actions</th>
          </tr>
        </thead>
        {% for e in experience %}
        <tbody>
          <tr onclick="window.location='{% url 'Talent:ExperienceDetail' e.slug %}'">
            <td class="align-middle text-center">{{ e.company }}</td>
            <td class="align-middle text-center">{{ e.date_from|date:"j M Y" }}</td>
            <td class="align-middle text-center">{{ e.date_to|date:"j M Y" }}</td>
            <td class="align-middle text-center">{{ e.hours_worked|intcomma }}</td>
            <td class="align-middle text-center">{{ e.project }}</td>
            <td class="align-middle text-center" data-toggle="tooltip" data-placement="top" title="A score > 3 is required to achieve a 'confirmed' status">{{ e.score }}</td>
            <td class="align-middle text-center"><div class="float-right">
              <a href="{% url 'Talent:ExperienceDetail' e.slug %}" class="badge badge-pill badge-secondary"  style="width: 5rem;">Detail</a>
              <form  action="{% url 'Talent:WEDelete' e.id %}" method="post">
                {% csrf_token %}
                <button type="submit" class="badge badge-danger badge-pill" style="width: 5rem;">Remove</button>
              </form></div>
            </td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
      {% if exp_count > 5 %}
      <div class="float-right">
        <p><a href="{% url 'Talent:ExperienceList' %}" class="btn btn-primary float-right">View All Experience</a></p>
      </div>
      {% endif %}
      <p>&nbsp</p>
    </div>
  </div>
<br>
<div class="card border-0" style="width: 100%;">
  <div class="card-body">
    <div class="float-right">
      <a href="{% url 'Talent:HelpExperiencePreExperience' %}" target="_blank" class="align-middle" data-toggle="tooltip" title="Click here for help on this page!" style="font-size: 27px" data-toggle="tooltip" title="Click here for help on this page!">
      <i class="icon icon-question-circle"></i></a>
    </div>
    <h4 class="card-title">Previously Logged Experience</h4>
    <p>There are a total of {{ pre_count }} Previously Logged experience items that have been captured{% if pre_count >= 5 %}, we only list the most recent 5 here.{% else %}.{% endif %}</p>
    <br>
      <div class="float-right">
        <p><a href="{% url 'Talent:PreloggedCapture' %}" class="badge badge-pill badge-primary float-right">Add Logged Experience</a></p>
      </div>
      <p><strong>Total hours of Previously Logged Experience: </strong>{{ pre_sum.p_sum|intcomma }}</p>
    <table class="table table-hover table-sm">
      <thead>
        <tr>
          <th class="align-middle text-center">Employer</th>
          <th class="align-middle text-center">Date from</th>
          <th class="align-middle text-center">Date to</th>
          <th class="align-middle text-center">Hours</th>
          <th class="align-middle text-center">Project</th>
          <th class="align-middle text-center" data-toggle="tooltip" data-placement="top" title="A score > 3 is required to achieve a 'confirmed' status">Score</th>
          <th class="align-middle text-center">Actions</th>
        </tr>
      </thead>
      {% for p in prelog %}
      <tbody>
        <tr onclick="window.location='{% url 'Talent:PreLogDetail' p.slug %}'">
          <td class="align-middle text-center">{{ p.company }}</td>
          <td class="align-middle text-center">{{ p.date_from|date:"j M Y" }}</td>
          <td class="align-middle text-center">{{ p.date_to|date:"j M Y" }}</td>
          <td class="align-middle text-center">{{ p.hours_worked|intcomma }}</td>
          <td class="align-middle text-center">{{ p.project }}</td>
          <td class="align-middle text-center" data-toggle="tooltip" data-placement="top" title="A score > 3 is required to achieve a 'confirmed' status">{{ p.score }}</td>
          <td class="align-middle text-center"><div class="float-right">
            <a href="{% url 'Talent:PreLogDetail' p.slug %}" class="badge badge-pill badge-secondary" style="width: 5rem;">Detail</a>
            <form  action="{% url 'Talent:PLEDelete' p.id %}" method="post">
              {% csrf_token %}
              <button type="submit" class="badge badge-danger badge-pill" style="width: 5rem;">Remove</button>
            </form></div>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
    {% if pre_count > 5 %}
    <div class="float-right">
      <p><a href="{% url 'Talent:PreExperienceList' %}" class="btn btn-primary float-right">View All Experience</a></p>
    </div>
    {% endif %}
    <p>&nbsp</p>
  </div>
</div>
    <br>

{% endblock content %}
